<!DOCTYPE html><html lang="pt"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.90a64d085401b13730dd.css">pre::-webkit-scrollbar{width:14px}pre::-webkit-scrollbar-track{background-color:#6272a4;border-radius:0}pre::-webkit-scrollbar-thumb{background-color:#bd93f9;border-radius:0}code[class*=language-],pre[class*=language-]{color:#ccc;background:#282936;text-shadow:none;font-family:PT Mono,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background-color:#5a5f80}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{background:#282936!important;border-radius:.5em;padding:1em;margin:.5em 0;overflow:auto;height:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#282936}:not(pre)>code[class*=language-]{padding:4px 7px;border-radius:.3em;white-space:normal}.limit-300{height:300px!important}.limit-400{height:400px!important}.limit-500{height:500px!important}.limit-600{height:600px!important}.limit-700{height:700px!important}.limit-800{height:800px!important}.token.comment{color:#6272a4}.token.prolog{color:#cfcfc2}.token.tag{color:#dc68aa}.token.entity{color:#8be9fd}.token.atrule{color:#62ef75}.token.url{color:#66d9ef}.token.selector{color:#cfcfc2}.token.string{color:#f1fa8c}.token.property{color:#ffb86c}.token.important{color:#ff79c6;font-weight:700}.token.punctuation{color:#fff}.token.number{color:#bd93f9}.token.function{color:#50fa7b}.token.class-name{color:#ffb86c}.token.keyword{color:#ff79c6}.token.boolean{color:#ffb86c}.token.operator{color:#8be9fd}.token.char{color:#ff879d}.token.regex,.token.variable{color:#50fa7b}.token.constant,.token.symbol{color:#ffb86c}.token.builtin{color:#ff79c6}.token.attr-value{color:#7ec699}.token.deleted,.token.namespace{color:#e2777a}.token.bold{font-weight:700}.token.italic{font-style:italic}.token{color:#ff79c6}.language-c .token.string,.language-cpp .token.string{color:#8be9fd}.language-css .token.selector{color:#50fa7b}.language-css .token.property{color:#ffb86c}.language-java .token.class-name,.language-java span.token.class-name{color:#8be9fd}.language-markup .token.attr-value{color:#66d9ef}.language-markup .token.tag{color:#50fa7b}.language-objectivec .token.property{color:#66d9ef}.language-objectivec .token.string{color:#50fa7b}.language-php .token.boolean{color:#8be9fd}.language-php .token.function{color:#ff79c6}.language-php .token.keyword{color:#66d9ef}.language-ruby .token.symbol{color:#8be9fd}.language-ruby .token.class-name{color:#cfcfc2}pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre.line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}div.code-toolbar{position:relative}div.code-toolbar>.toolbar{position:absolute;top:.3em;right:.2em;-webkit-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out;opacity:0}div.code-toolbar:hover>.toolbar{opacity:1}div.code-toolbar>.toolbar .toolbar-item{display:inline-block;padding-right:20px}div.code-toolbar>.toolbar a{cursor:pointer}div.code-toolbar>.toolbar button{background:none;border:0;color:inherit;font:inherit;line-height:normal;overflow:visible;padding:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}div.code-toolbar>.toolbar a,div.code-toolbar>.toolbar button,div.code-toolbar>.toolbar span{color:#ccc;font-size:.8em;padding:.5em;background:#6272a4;border-radius:.5em}div.code-toolbar>.toolbar a:focus,div.code-toolbar>.toolbar a:hover,div.code-toolbar>.toolbar button:focus,div.code-toolbar>.toolbar button:hover,div.code-toolbar>.toolbar span:focus,div.code-toolbar>.toolbar span:hover{color:inherit;text-decoration:none;background-color:var(--verde)}*{padding:0;margin:0;box-sizing:border-box;list-style-type:none;text-decoration:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.post-content p:not(:last-child),.post-content ul{margin-bottom:16px}.post-content ul{padding-left:20px}.post-content li{list-style-type:disc;margin-bottom:8px;color:var(--text)}.post-content a{line-height:1.8;color:#3498db;border-bottom:2px solid}.secondary-font{line-height:1.8;font-family:Open Sans,sans-serif}.post-content a:hover{color:#2980b9}.post-content img{margin-bottom:8px}img{width:100%}:root{--gray:#ababab;--theme:#2c3e50;--black:#333;--light:#ecf0f1;--white:#fff;--primary:#3498db;--darkPrimary:#2980b9;--text:var(--black);--title:#2c3e50;--background:var(--white);--darkMode:true}</style><meta name="generator" content="Gatsby 2.18.12"/><title data-react-helmet="true">Replacing Redux to React Hooks</title><meta data-react-helmet="true" property="og:title" content="Replacing Redux to React Hooks"/><meta data-react-helmet="true" name="description" content="&lt;p&gt;In 2019 I was learning how to use React Hooks and decided to replace the state management from a simple application that I was building of Redux to React Hooks. I didn&amp;#8217;t know how I would do that, however, in the end, it worked pretty well. I kept the concerns of reducer, actions, types, middleware, [&amp;hellip;]&lt;/p&gt;
"/><meta data-react-helmet="true" property="og:description" content="&lt;p&gt;In 2019 I was learning how to use React Hooks and decided to replace the state management from a simple application that I was building of Redux to React Hooks. I didn&amp;#8217;t know how I would do that, however, in the end, it worked pretty well. I kept the concerns of reducer, actions, types, middleware, [&amp;hellip;]&lt;/p&gt;
"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:url" content=""/><meta data-react-helmet="true" property="og:image" content="/static/6ab18a3b7fdbd04ff6f656cafc14414d/48cea/road-4598095_1280.jpg"/><meta data-react-helmet="true" property="witter:image" content="/static/6ab18a3b7fdbd04ff6f656cafc14414d/48cea/road-4598095_1280.jpg"/><meta data-react-helmet="true" property="og:site_name" content="Sérgio Júnior - Front End Developer"/><link rel="icon" href="/icons/icon-48x48.png?v=e7be62aa0976e3dcdccbaeceb9060b48"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=e7be62aa0976e3dcdccbaeceb9060b48"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=e7be62aa0976e3dcdccbaeceb9060b48"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=e7be62aa0976e3dcdccbaeceb9060b48"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=e7be62aa0976e3dcdccbaeceb9060b48"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=e7be62aa0976e3dcdccbaeceb9060b48"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=e7be62aa0976e3dcdccbaeceb9060b48"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=e7be62aa0976e3dcdccbaeceb9060b48"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=e7be62aa0976e3dcdccbaeceb9060b48"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/google-fonts/s/merriweather/v21/u-440qyriQwlOrhSvowK_l5-fCZM.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/google-fonts/s/merriweather/v21/u-4n0qyriQwlOrhSvowK_l521wRZWMf6.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/google-fonts/s/merriweather/v21/u-4n0qyriQwlOrhSvowK_l52xwNZWMf6.woff2"/><style type="text/css">@font-face{font-family:Merriweather;font-style:normal;font-weight:300;src:local('Merriweather Light'),local('Merriweather-Light'),url(/google-fonts/s/merriweather/v21/u-4n0qyriQwlOrhSvowK_l521wRZWMf6.woff2) format('woff2'),url(/google-fonts/s/merriweather/v21/u-4n0qyriQwlOrhSvowK_l521wRZWMf8.woff) format('woff');font-display: swap;}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;src:local('Merriweather Regular'),local('Merriweather-Regular'),url(/google-fonts/s/merriweather/v21/u-440qyriQwlOrhSvowK_l5-fCZM.woff2) format('woff2'),url(/google-fonts/s/merriweather/v21/u-440qyriQwlOrhSvowK_l5-fCZK.woff) format('woff');font-display: swap;}@font-face{font-family:Merriweather;font-style:normal;font-weight:700;src:local('Merriweather Bold'),local('Merriweather-Bold'),url(/google-fonts/s/merriweather/v21/u-4n0qyriQwlOrhSvowK_l52xwNZWMf6.woff2) format('woff2'),url(/google-fonts/s/merriweather/v21/u-4n0qyriQwlOrhSvowK_l52xwNZWMf8.woff) format('woff');font-display: swap;}</style><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-64953806-6', 'auto', {});
      
      
      
      
      
      }</script><link as="script" rel="preload" href="/app-6636270e74f8217bce84.js"/><link as="script" rel="preload" href="/component---src-templates-post-en-js-8a5d50cc8a3c361d1e81.js"/><link as="script" rel="preload" href="/styles-156184b221207714e54d.js"/><link as="script" rel="preload" href="/commons-2183538a8e5c08226e6c.js"/><link as="script" rel="preload" href="/webpack-runtime-c696d4eab4edeaf536f9.js"/><link as="fetch" rel="preload" href="/page-data/posts_en/replacing-redux-to-react-hooks/page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><style data-emotion-css="ituevm">.css-ituevm{background:var(--background);height:100vh;overflow:scroll;-webkit-transition:background 0.3s ease;transition:background 0.3s ease;will-change:background;}</style><div class="css-ituevm"><style data-emotion-css="1ebyzc5">.css-1ebyzc5{background:var(--theme);height:60px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:40px;}</style><header class="css-1ebyzc5"><style data-emotion-css="uf1ume">.css-uf1ume{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><style data-emotion-css="1vrhw4e">.css-1vrhw4e{max-width:1200px;padding:0 15px;width:100%;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><div class="css-1vrhw4e"><a href="/"><style data-emotion-css="1g73syq">.css-1g73syq{font-family:"Open Sans",sans-serif;font-size:24px;color:var(--light);}</style><h1 class="css-1g73syq">Sérgio Júnior</h1></a><style data-emotion-css="1sg2lsz">.css-1sg2lsz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><nav class="css-1sg2lsz"><style data-emotion-css="141pr1k">.css-141pr1k{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><ul class="css-141pr1k"><style data-emotion-css="cl9tds">.css-cl9tds{margin-left:15px;display:none;}@media screen and (min-width:720px){.css-cl9tds{display:block;}}</style><li class="css-cl9tds"><style data-emotion-css="1b8i0dj">.css-1b8i0dj{font-family:"Open Sans",sans-serif;color:var(--light);}</style><a class="css-1b8i0dj" href="/">Início</a></li><li class="css-cl9tds"><a class="css-1b8i0dj" href="/blog">Artigos</a></li><li class="css-cl9tds"><a class="css-1b8i0dj" href="/projetos">Projetos</a></li><style data-emotion-css="1oxgg1n">.css-1oxgg1n{margin-left:15px;}</style><li class="css-1oxgg1n"><div><style data-emotion-css="1fa4s91">.css-1fa4s91{width:0;height:0;display:none;}.css-1fa4s91:checked ~ label{background:#333;}.css-1fa4s91:checked ~ label:after{-webkit-transform:translateX(26px);-ms-transform:translateX(26px);transform:translateX(26px);}.css-1fa4s91:checked ~ label:before{content:"🌚";-webkit-transform:translateX(-26px);-ms-transform:translateX(-26px);transform:translateX(-26px);}</style><input type="checkbox" id="toggle" class="css-1fa4s91"/><style data-emotion-css="yjbzmk">.css-yjbzmk{background:#eca723;cursor:pointer;width:50px;display:block;height:24px;border-radius:50px;position:relative;}.css-yjbzmk:after{content:"";width:20px;height:20px;background:#fff;position:absolute;border-radius:50%;bottom:0;top:0;margin:auto;left:2px;-webkit-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);-webkit-transition:-webkit-transform 0.2s ease;-webkit-transition:transform 0.2s ease;transition:transform 0.2s ease;will-change:transform;}.css-yjbzmk:before{content:"🌞";position:absolute;right:0;margin:auto;bottom:0;-webkit-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);-webkit-transition:-webkit-transform 0.2s ease;-webkit-transition:transform 0.2s ease;transition:transform 0.2s ease;will-change:transform;}</style><label for="toggle" class="css-yjbzmk"></label></div></li><style data-emotion-css="a7js5f">.css-a7js5f{margin-left:15px;}@media screen and (min-width:720px){.css-a7js5f{display:none;}}</style><li class="css-a7js5f"><style data-emotion-css="ih24cn">.css-ih24cn{background:none;border:0;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><button class="css-ih24cn"><svg fill="#fff" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26px" height="26px"><path d="M 0 4 L 0 6 L 26 6 L 26 4 Z M 0 12 L 0 14 L 26 14 L 26 12 Z M 0 20 L 0 22 L 26 22 L 26 20 Z"></path></svg></button></li></ul></nav></div></header><style data-emotion-css="rd7h8u">.css-rd7h8u{z-index:9;position:fixed;width:100vw;height:100vh;background:var(--theme);top:0;-webkit-transition:-webkit-transform 0.3s ease;-webkit-transition:transform 0.3s ease;transition:transform 0.3s ease;will-change:transform;-webkit-transform:translateY(100%);-ms-transform:translateY(100%);transform:translateY(100%);}@media screen and (min-width:720px){.css-rd7h8u{display:none;}}</style><div class="css-rd7h8u"><style data-emotion-css="1asylr1">.css-1asylr1{position:absolute;right:15px;top:22px;background:none;border:0;cursor:pointer;}</style><button class="css-1asylr1"><svg fill="#fff" viewBox="0 0 413.348 413.348" height="25" width="25" xmlns="http://www.w3.org/2000/svg"><path d="m413.348 24.354-24.354-24.354-182.32 182.32-182.32-182.32-24.354 24.354 182.32 182.32-182.32 182.32 24.354 24.354 182.32-182.32 182.32 182.32 24.354-24.354-182.32-182.32z"></path></svg></button><style data-emotion-css="km3zwk">.css-km3zwk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}</style><ul class="css-km3zwk"><li><style data-emotion-css="r46x25">.css-r46x25{font-family:"Open Sans",sans-serif;margin-bottom:32px;color:var(--light);display:block;}</style><a class="css-r46x25" href="/">Início</a></li><li><a class="css-r46x25" href="/blog">Artigos</a></li><li><a class="css-r46x25" href="/projetos">Projetos</a></li></ul></div><style data-emotion-css="1is8dr0">.css-1is8dr0{min-height:calc(100vh - 200px);}</style><div class="css-1is8dr0"><style data-emotion-css="hsnqky">.css-hsnqky{max-width:700px;padding:0 15px;width:100%;margin:0 auto;}</style><div class="css-hsnqky"><style data-emotion-css="bpi9el">.css-bpi9el:not(:last-child){margin-bottom:20px;}</style><article class="post-content css-bpi9el"><style data-emotion-css="env1z2">.css-env1z2{margin-bottom:8px;}</style><div class="css-env1z2"><style data-emotion-css="1ubnuhc">.css-1ubnuhc{line-height:1.8;color:#3498db;border-bottom:2px solid;}.css-1ubnuhc:hover{color:#2980b9;}</style><a class="secondary-font css-1ubnuhc" href="/substituindo-redux-por-hooks">Leia esse artigo em Português</a></div><style data-emotion-css="1bj9jfq">.css-1bj9jfq{margin-bottom:8px;color:var(--title);font-size:24px;font-weight:bold;font-family:"Open Sans",sans-serif;}</style><h1 class="css-1bj9jfq">Replacing Redux to React Hooks</h1><style data-emotion-css="tvtlbl">.css-tvtlbl{color:var(--text);line-height:1.8;font-size:16px;font-family:"Merriweather",serif;margin-bottom:8px;-webkit-transition:color 0.3s ease;transition:color 0.3s ease;will-change:color;color:var(--gray);}</style><p class="css-tvtlbl">Published at<time dateTime="01-30-2020"> <!-- -->01-30-2020</time></p><img src="/static/6ab18a3b7fdbd04ff6f656cafc14414d/48cea/road-4598095_1280.jpg" alt="Replacing Redux to React Hooks"/><style data-emotion-css="1mu05f0">.css-1mu05f0{color:var(--text);line-height:1.8;font-size:16px;font-family:"Merriweather",serif;margin-bottom:8px;-webkit-transition:color 0.3s ease;transition:color 0.3s ease;will-change:color;}</style><div class="css-1mu05f0">
<p>In 2019 I was learning how to use React Hooks and decided to replace the state management from a simple application that I was building of Redux to React Hooks. I didn&#8217;t know how I would do that, however, in the end, it worked pretty well.</p>



<p>I kept the concerns of reducer, actions, types, middleware, mapStateToProps and I wrote an article on Medium showing up how I had made. After I shared within the community, it was even published at React Brazil&#8217;s Oficial Account on Medium.</p>



<p>I was really happy with the feedback but I felt I could refactor that code which I wrote one year ago and make it clean, organized, therefore, I ended up rewriting my code example and my article, that became this that you&#8217;re reading right now. </p>



<p>I&#8217;m using the same example of a simple counter and authentication. In case you want, you can check the demo and the repository with the final code.</p>



<p>Primeiro, vamos criar os estados do nosso contador e autenticação na nossa store e também seus reducers, types e actions. Eles seguem basicamente o mesmo modelo do Redux, estou apenas usando o padrão Ducks pra manter tudo o que é relacionado no mesmo arquivo.</p>



<p>Você pode ler mais sobre esse padrão de organização nesse link.</p>



<p>//src/store/reducers/auth.js<br>
export const authDefault = {<br>
  auth: {<br>
    isLogged: false,<br>
    user: {}<br>
  }<br>
};</p>



<p>export const LOGIN = &#8220;LOGIN&#8221;;<br>
export const LOGOUT = &#8220;LOGOUT&#8221;;</p>



<p>const authReducer = (state = authDefault, action) =&gt; {<br>
  switch (action.type) {<br>
    case LOGIN:<br>
      return {<br>
        auth: {<br>
          …state.auth,<br>
          isLogged: true,<br>
          user: action.payload<br>
        }<br>
      };<br>
    case LOGOUT:<br>
      return {<br>
        auth: {<br>
          …state.auth,<br>
          isLogged: false,<br>
          user: {}<br>
        }<br>
      };<br>
    default:<br>
      return state;<br>
  }<br>
};</p>



<p>export const loginAction = user =&gt; {<br>
  return {<br>
    type: LOGIN,<br>
    payload: user<br>
  };<br>
};</p>



<p>export const logoutAction = () =&gt; {<br>
  return {<br>
    type: LOGOUT<br>
  };<br>
};</p>



<p>export default authReducer;</p>



<p>//src/store/reducers/counter.js<br>
export const counterDefault = {<br>
  counter: 0<br>
};</p>



<p>export const INCREMENT = &#8220;INCREMENT&#8221;;<br>
export const DECREMENT = &#8220;DECREMENT&#8221;;<br>
export const RESET = &#8220;RESET&#8221;;</p>



<p>const counterReducer = (state = counterDefault, action) =&gt; {<br>
  switch (action.type) {<br>
    case INCREMENT:<br>
      return {<br>
        …state,<br>
        counter: state.counter + 1<br>
      };<br>
    case DECREMENT:<br>
      return {<br>
        …state,<br>
        counter: state.counter &#8211; 1<br>
      };<br>
    case RESET:<br>
      return {<br>
        counter: 0<br>
      };<br>
    default:<br>
      return state;<br>
  }<br>
};</p>



<p>export const incrementAction = () =&gt; {<br>
  return {<br>
    type: INCREMENT<br>
  };<br>
};</p>



<p>export const decrementAction = () =&gt; {<br>
  return {<br>
    type: DECREMENT<br>
  };<br>
};</p>



<p>export const resetAction = () =&gt; {<br>
  return {<br>
    type: RESET<br>
  };<br>
};</p>



<p>export default counterReducer;</p>



<p>Agora vamos criar nossos custom hooks, o primeiro é o useCombinedReducers, responsável por retornar um array com os reducers e um objeto com o valor padrão da nossa store. Aqui iremos utilizar o hook useReducer.</p>



<p>//src/store/hooks/useCombinedReducers.js<br>
import { useReducer } from &#8220;react&#8221;;<br>
import counterReducer, { counterDefault } from &#8220;./../reducers/counter&#8221;;<br>
import authReducer, { authDefault } from &#8220;./../reducers/auth&#8221;;</p>



<p>const useCombinedReducers = () =&gt; {<br>
  const [counterStore, counter] = useReducer(counterReducer, counterDefault);<br>
  const [authStore, auth] = useReducer(authReducer, authDefault);</p>



<p>return {<br>
    store: { …counterStore, …authStore },<br>
    reducers: [counter, auth]<br>
  };<br>
};</p>



<p>export default useCombinedReducers;</p>



<p>Sempre que formos adicionar um novo objeto na nossa store, precisaremos apenas alterar esse arquivo, importando seu reducer, seu valor padrão, passa-los para o useReducer e os retornar na função principal.</p>



<p>Essa foi a única alteração que eu fiz pro Redux, para tornar nosso componente Provider mais dinâmico e não precisar altera-lo novamente.</p>



<p>Nosso segundo custom hook é o useStore, responsável por criar e fornecer o context da aplicação através do hook useContext.</p>



<p>//src/store/hooks/useStore.js<br>
import { useContext, createContext } from &#8220;react&#8221;;<br>
import { authDefault } from &#8220;../reducers/auth&#8221;;<br>
import { counterDefault } from &#8220;../reducers/counter&#8221;;</p>



<p>export const defaultStore = {<br>
  store: { …authDefault, …counterDefault },<br>
  dispatch: () =&gt; {}<br>
};</p>



<p>export const StoreContext = createContext(defaultStore);<br>
export default () =&gt; {<br>
  return useContext(storeContext);<br>
};</p>



<p>Com esse custom hook também será possível acessar diretamente nossa store e o dispatch, além do componente Connect, que vamos criar logo em seguida.</p>



<p>O Connect injetará nossa store e dispatch nos nossos componentes. Aqui usamos componente StoreContext retornado no nosso hook useStore.</p>



<p>//src/store/connect.js<br>
import React from &#8220;react&#8221;;<br>
import { StoreContext } from &#8220;./hooks/useStore&#8221;;</p>



<p>const returnPropsAsDefault = (store, props) =&gt; props;</p>



<p>const Connect = (mapStateToProps = returnPropsAsDefault) =&gt; Component =&gt; {<br>
  return function WrapConnect(props) {<br>
    return (<br>
      
        {({ dispatch, store }) =&gt; {
          const storeProps = mapStateToProps(store, props);
          return ;
        }}
      <br>
    );<br>
  };<br>
};</p>



<p>export default Connect;</p>



<p>Ele funcionará semelhante ao do Redux, recebendo o mapStateToProps e o componente que receberá a store.</p>



<p>Lembrando que o mapStateToProps é uma função que recebe a store e as props originais. Você é responsável por retornar a store inteira ou selecionar os objetos que precise, assim:</p>



<p>function mapStateToProps(store, props) {<br>
  return {<br>
    …store,<br>
    …props<br>
  }<br>
}</p>



<p>export default Connect(mapStateToProps)(Component)</p>



<p>Caso o mapStateToProps não seja fornecido, sua função padrão returnPropsAsDefault retornará as props originais do componente.</p>



<p>O próximo componente será nosso Provider, que irá envolver nossa plataforma e tornar nossa store disponível dentro dela. Usamos o hook useCombinedReducers para receber o valor da store e um array com nossos reducers.</p>



<p>//src/store/index.js<br>
import React from &#8220;react&#8221;;<br>
import PropTypes from &#8220;prop-types&#8221;;<br>
import useCombinedReducers from &#8220;./hooks/useCombinedReducers&#8221;;<br>
import { StoreContext } from &#8220;./hooks/useStore&#8221;;</p>



<p>const Provider = ({ children }) =&gt; {<br>
  const { store, reducers } = useCombinedReducers();</p>



<p>const triggerDispatchs = action =&gt; {<br>
    for (let i = 0; i &lt; reducers.length; i++) {<br>
      reducers<a href="action">i</a>;<br>
    }<br>
  };</p>



<p>return (<br>
    
      {children}
    <br>
  );<br>
};</p>



<p>Provider.propTypes = {<br>
  children: PropTypes.node.isRequired<br>
};</p>



<p>export default Provider;</p>



<p>Apenas explicando, o método triggerDispatchs faz um loop em nossos reducers, passando a action como parâmetro pra cada um deles.</p>



<p>Também podemos adicionar um middleware nesse arquivo, que servirá pra interceptar nossos dispatchs e fazer qualquer coisa que queremos a partir disso, como uma requisição, disparar outra action, etc.</p>



<p>Ele será basicamente assim.</p>



<p>//src/store/middleware.js<br>
import { LOGOUT } from &#8220;./reducers/auth&#8221;;<br>
import { resetAction } from &#8220;./reducers/counter&#8221;;</p>



<p>export default action =&gt; dispatch =&gt; {<br>
  if (action.type === LOGOUT) {<br>
    dispatch(resetAction());<br>
  }</p>



<p>dispatch(action);<br>
};</p>



<p>Ele é um closure que recebe a action e o dispatch, nesse caso estou disparando a action resetAction caso o type da action original seja LOGOUT.</p>



<p>Pra o utilizarmos precisamos alterar o arquivo do nosso Provider, importando nosso middleware, criando o método withMiddleware e substituir a atribuição do dispatch.</p>



<p>//src/store/index.js<br>
import React from &#8220;react&#8221;;<br>
import PropTypes from &#8220;prop-types&#8221;;<br>
import useCombinedReducers from &#8220;./hooks/useCombinedReducers&#8221;;<br>
import { StoreContext } from &#8220;./hooks/useStore&#8221;;<br>
import middleware from &#8220;./middleware&#8221;;</p>



<p>const Provider = ({ children }) =&gt; {<br>
  const { store, reducers } = useCombinedReducers();</p>



<p>const triggerDispatchs = action =&gt; {<br>
    for (let i = 0; i &lt; reducers.length; i++) {<br>
      reducers<a href="action">i</a>;<br>
    }<br>
  };</p>



<p>const withMiddleware = action =&gt; {<br>
    middleware(action)(triggerDispatchs);<br>
  };</p>



<p>return (<br>
    
      {children}
    <br>
  );<br>
};</p>



<p>Provider.propTypes = {<br>
  children: PropTypes.node.isRequired<br>
};</p>



<p>export default Provider;</p>



<p>Agora só precisamos envolver nossa aplicação com o Provider, dessa maneira.</p>



<p>//src/index.js<br>
import React from &#8220;react&#8221;;<br>
import ReactDOM from &#8220;react-dom&#8221;;<br>
import &#8220;./index.css&#8221;;<br>
import App from &#8220;./App&#8221;;<br>
import Provider from &#8220;./store&#8221;;</p>



<p>ReactDOM.render(<br>
  
    
  ,<br>
  document.getElementById(&#8220;root&#8221;)<br>
);</p>



<p>Nesse ponto já temos tudo o que precisamos configurado para usar a store na nossa aplicação.<br>
Conectando nossos componentes</p>



<p>Vamos começar conectando nossa store nos nossos componentes Counter, Login e Header.</p>



<p>//src/container/counter.js<br>
import React from &#8220;react&#8221;;<br>
import PropTypes from &#8220;prop-types&#8221;;<br>
import ConnectTo from &#8220;../store/connect&#8221;;<br>
import { decrementAction, incrementAction } from &#8220;../store/reducers/counter&#8221;;</p>



<p>const Counter = ({ dispatch, counter }) =&gt; {<br>
  const decrementHandler = () =&gt; dispatch(decrementAction());<br>
  const incrementHandler = () =&gt; dispatch(incrementAction());</p>



<p>return (<br>
    </p>



<p>{counter}
      
        
          &#8211;
        
        
          +
        
      <br><br>
  );<br>
};
</p>



<p>Counter.propTypes = {<br>
  dispatch: PropTypes.func.isRequired,<br>
  counter: PropTypes.number.isRequired<br>
};</p>



<p>const mapStateToProps = ({ counter }, props) =&gt; {<br>
  return {<br>
    counter,<br>
    …props<br>
  };<br>
};</p>



<p>export default ConnectTo(mapStateToProps)(Counter);</p>



<p>//src/container/login.js<br>
import React, { useState } from &#8220;react&#8221;;<br>
import PropTypes from &#8220;prop-types&#8221;;<br>
import Connect from &#8220;../store/connect&#8221;;<br>
import { loginAction } from &#8220;../store/reducers/auth&#8221;;</p>



<p>const Login = ({ dispatch }) =&gt; {<br>
  const [name, setName] = useState(&#8220;&#8221;);<br>
  const changeNameHandler = ({ target: { value } }) =&gt; setName(value);<br>
  const onSubmitHandler = () =&gt; dispatch(loginAction(name));<br>
  return (<br>
    </p>



<p>
          Context + useState ={&#8221; &#8220;}
          
            ❤️
          
        
        
        
          Entrar
        
      
    <br>
  );<br>
};
</p>



<p>Login.propTypes = {<br>
  dispatch: PropTypes.func.isRequired<br>
};</p>



<p>export default Connect()(Login);</p>



<p>//src/container/header.js<br>
import React from &#8220;react&#8221;;<br>
import { logoutAction } from &#8220;../store/reducers/auth&#8221;;<br>
import useStore from &#8220;../store/hooks/useStore&#8221;;</p>



<p>const Header = () =&gt; {<br>
  const {<br>
    dispatch,<br>
    store: { auth }<br>
  } = useStore();<br>
  const logoutHandler = () =&gt; dispatch(logoutAction());<br>
  return (<br>
    </p>



<p>
            Context + useState ={&#8221; &#8220;}
            
              ❤️
            
          </p>



<p>Olá, {auth.user}
            
              Sair
            
          <br><br><br><br>
  );<br>
};
</p>



<p>export default Header;</p>



<p>Se você já usou Redux, deve ser familiar com o que temos aqui; o componente Connect injeta o dispatch e a store, também importamos as actions pra passarmos como seu parâmetro.</p>



<p>No nosso Header eu estou usando o custom hook useStore pra acessar a store e o dispatch, ao invés do Connect. Fique a vontade pra usar qual preferir 🙂</p>



<p>Agora vamos colocar todos nossos componentes juntos e criar uma condição pra mostra-los, usando a autenticação da nossa store.</p>



<p>//src/app.js<br>
import React from &#8220;react&#8221;;<br>
import PropTypes from &#8220;prop-types&#8221;;<br>
import Counter from &#8220;./container/counter&#8221;;<br>
import Login from &#8220;./container/login&#8221;;<br>
import Connect from &#8220;./store/connect&#8221;;<br>
import Header from &#8220;./container/header&#8221;;</p>



<p>const App = ({ auth }) =&gt; {<br>
  return (<br>
    
      
        {auth.isLogged ? (
          &lt;&gt;
            
            
          
        ) : (
          
        )}
      <br><br>
  );<br>
};
</p>



<p>App.propTypes = {<br>
  auth: PropTypes.shape({<br>
    isLogged: PropTypes.bool<br>
  }).isRequired<br>
};</p>



<p>const mapStateToProps = ({ auth }, props) =&gt; {<br>
  return {<br>
    auth,<br>
    …props<br>
  };<br>
};</p>



<p>export default Connect(mapStateToProps)(App);</p>



<p>É isso. Sua aplicação já deve estar funcionando com uma store criada com os hooks nativos do React.</p>



<p>Você pode ver a demo de como ficou aqui.</p>



<p>Ressaltando que os dois únicos pontos negativos comparados ao Redux é a falta de uma extensão do navegador, como o Redux DevTools, que nos permite debugar as interações com a store e também a falta de suporte para as actions assíncronas, como redux-thunk.</p>



<p>Também preciso dizer que dependendo do tamanho e complexidade da sua aplicação, usar o Redux poderá ser mais perfomatico do que os hooks.</p>



<p>Espero que não fique decepcionado comigo por causa desses pontos.</p>



<p>Todo esse exemplo está nesse repositório, fique a vontade pra baixa-lo, usa-lo, compartilha-lo e deixar uma star.</p>



<p>Qualquer sugestão, crítica ou comentário é super bem vindo, compartilhe comigo nos comentários a baixo.</p>



<p>Até breve.</p>
</div></article><div id="disqus_thread"></div></div></div><style data-emotion-css="1huiatr">.css-1huiatr{background:var(--theme);height:60px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-top:40px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}</style><footer class="css-1huiatr"><ul class="css-uf1ume"><style data-emotion-css="wnsr6c">.css-wnsr6c{margin:0 15px;}</style><li class="css-wnsr6c"><a aria-label="Minha conta no Medium" title="Minha conta no Medium" target="_blank" rel="noopener noreferrer" href="https://medium.com/@sergioamjr91" class="css-1b8i0dj"><svg fill="#fff" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="30px" height="30px"><path d="M 18 41.578125 C 18 42.46875 17.523438 43 16.847656 43 C 16.609375 43 16.34375 42.933594 16.0625 42.792969 L 5.164063 37.273438 C 4.523438 36.949219 4 36.089844 4 35.367188 L 4 8.3125 C 4 7.597656 4.378906 7.175781 4.921875 7.175781 C 5.113281 7.175781 5.328125 7.226563 5.550781 7.339844 L 5.933594 7.535156 C 5.933594 7.535156 5.9375 7.535156 5.9375 7.535156 L 17.949219 13.617188 C 17.96875 13.628906 17.984375 13.648438 18 13.664063 Z M 30.585938 8.882813 L 31.320313 7.675781 C 31.582031 7.246094 32.0625 7 32.550781 7 C 32.664063 7 32.78125 7.015625 32.894531 7.046875 C 32.980469 7.066406 33.070313 7.097656 33.164063 7.144531 L 45.832031 13.558594 C 45.835938 13.558594 45.835938 13.5625 45.835938 13.5625 L 45.847656 13.566406 C 45.855469 13.570313 45.855469 13.582031 45.863281 13.585938 C 45.925781 13.636719 45.953125 13.722656 45.910156 13.792969 L 33.292969 34.558594 L 32.003906 36.675781 L 23.644531 20.304688 Z M 20 30.605469 L 20 17.5625 L 28.980469 35.15625 L 20.902344 31.066406 Z M 46 41.578125 C 46 42.414063 45.503906 42.890625 44.773438 42.890625 C 44.445313 42.890625 44.070313 42.796875 43.675781 42.597656 L 41.867188 41.679688 L 33.789063 37.589844 L 46 17.496094 Z"></path></svg></a></li><li class="css-wnsr6c"><a aria-label="Minha conta no CodePen" title="Minha conta no CodePen" target="_blank" rel="noopener noreferrer" href="https://codepen.io/sergioamjr" class="css-1b8i0dj"><svg fill="#fff" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="30px" height="30px"><path d="M 25 4 L 4 17.34375 L 4 32.652344 L 25 46 L 46 32.65625 L 46 17.34375 Z M 25 29.183594 L 19.066406 25.070313 L 25 21.023438 L 30.933594 25.070313 Z M 27 17.605469 L 27 9.949219 L 40.429688 18.484375 L 34.410156 22.65625 Z M 23 17.605469 L 15.589844 22.65625 L 9.570313 18.484375 L 23 9.949219 Z M 12.09375 25.042969 L 8 27.832031 L 8 22.203125 Z M 15.570313 27.453125 L 23 32.605469 L 23 40.050781 L 9.589844 31.527344 Z M 27 32.605469 L 34.429688 27.453125 L 40.410156 31.527344 L 27 40.050781 Z M 37.90625 25.042969 L 42 22.203125 L 42 27.832031 Z"></path></svg></a></li><li class="css-wnsr6c"><a aria-label="Minha conta no Github" title="Minha conta no Github" target="_blank" rel="noopener noreferrer" href="https://github.com/Sergioamjr/" class="css-1b8i0dj"><svg fill="#fff" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="30px" height="30px"> <path d="M17.791,46.836C18.502,46.53,19,45.823,19,45v-5.4c0-0.197,0.016-0.402,0.041-0.61C19.027,38.994,19.014,38.997,19,39 c0,0-3,0-3.6,0c-1.5,0-2.8-0.6-3.4-1.8c-0.7-1.3-1-3.5-2.8-4.7C8.9,32.3,9.1,32,9.7,32c0.6,0.1,1.9,0.9,2.7,2c0.9,1.1,1.8,2,3.4,2 c2.487,0,3.82-0.125,4.622-0.555C21.356,34.056,22.649,33,24,33v-0.025c-5.668-0.182-9.289-2.066-10.975-4.975 c-3.665,0.042-6.856,0.405-8.677,0.707c-0.058-0.327-0.108-0.656-0.151-0.987c1.797-0.296,4.843-0.647,8.345-0.714 c-0.112-0.276-0.209-0.559-0.291-0.849c-3.511-0.178-6.541-0.039-8.187,0.097c-0.02-0.332-0.047-0.663-0.051-0.999 c1.649-0.135,4.597-0.27,8.018-0.111c-0.079-0.5-0.13-1.011-0.13-1.543c0-1.7,0.6-3.5,1.7-5c-0.5-1.7-1.2-5.3,0.2-6.6 c2.7,0,4.6,1.3,5.5,2.1C21,13.4,22.9,13,25,13s4,0.4,5.6,1.1c0.9-0.8,2.8-2.1,5.5-2.1c1.5,1.4,0.7,5,0.2,6.6c1.1,1.5,1.7,3.2,1.6,5 c0,0.484-0.045,0.951-0.11,1.409c3.499-0.172,6.527-0.034,8.204,0.102c-0.002,0.337-0.033,0.666-0.051,0.999 c-1.671-0.138-4.775-0.28-8.359-0.089c-0.089,0.336-0.197,0.663-0.325,0.98c3.546,0.046,6.665,0.389,8.548,0.689 c-0.043,0.332-0.093,0.661-0.151,0.987c-1.912-0.306-5.171-0.664-8.879-0.682C35.112,30.873,31.557,32.75,26,32.969V33 c2.6,0,5,3.9,5,6.6V45c0,0.823,0.498,1.53,1.209,1.836C41.37,43.804,48,35.164,48,25C48,12.318,37.683,2,25,2S2,12.318,2,25 C2,35.164,8.63,43.804,17.791,46.836z"></path></svg></a></li><li class="css-wnsr6c"><a aria-label="Minha conta no LinkedIn" title="Minha conta no LinkedIn" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/sergioamjr/" class="css-1b8i0dj"><svg fill="#fff" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="30px" height="30px"><path d="M 21.125 0 L 4.875 0 C 2.183594 0 0 2.183594 0 4.875 L 0 21.125 C 0 23.816406 2.183594 26 4.875 26 L 21.125 26 C 23.816406 26 26 23.816406 26 21.125 L 26 4.875 C 26 2.183594 23.816406 0 21.125 0 Z M 8.039063 22.070313 L 4 22.070313 L 3.976563 9.976563 L 8.015625 9.976563 Z M 5.917969 8.394531 L 5.894531 8.394531 C 4.574219 8.394531 3.722656 7.484375 3.722656 6.351563 C 3.722656 5.191406 4.601563 4.3125 5.945313 4.3125 C 7.289063 4.3125 8.113281 5.191406 8.140625 6.351563 C 8.140625 7.484375 7.285156 8.394531 5.917969 8.394531 Z M 22.042969 22.070313 L 17.96875 22.070313 L 17.96875 15.5 C 17.96875 13.910156 17.546875 12.828125 16.125 12.828125 C 15.039063 12.828125 14.453125 13.558594 14.171875 14.265625 C 14.066406 14.519531 14.039063 14.867188 14.039063 15.222656 L 14.039063 22.070313 L 9.945313 22.070313 L 9.921875 9.976563 L 14.015625 9.976563 L 14.039063 11.683594 C 14.5625 10.875 15.433594 9.730469 17.519531 9.730469 C 20.105469 9.730469 22.039063 11.417969 22.039063 15.046875 L 22.039063 22.070313 Z"></path></svg></a></li></ul></footer></div></div></div><script>var head = document.head || document.getElementsByTagName("head")[0];var script = document.createElement("script");script.src="https://sergiojunior-netlify.disqus.com/count.js";script.type="text/javascript";script.charset="utf8";script.async=true;head.appendChild(script);</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts_en/replacing-redux-to-react-hooks/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-6636270e74f8217bce84.js"],"component---src-templates-page-js":["/component---src-templates-page-js-e1d88ede60b4840ebb28.js"],"component---src-templates-resume-js":["/component---src-templates-resume-js-016ac9eb4ef6a26634f8.js"],"component---src-templates-post-js":["/component---src-templates-post-js-a02167100793daf206ea.js"],"component---src-templates-post-en-js":["/component---src-templates-post-en-js-8a5d50cc8a3c361d1e81.js"],"component---src-pages-404-js":["/component---src-pages-404-js-d20fbaf09df195255d98.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-14fbe97be096c3b96394.js"],"component---src-pages-en-blog-js":["/component---src-pages-en-blog-js-0c95768f92503cae2d98.js"],"component---src-pages-en-projects-js":["/component---src-pages-en-projects-js-e30c63e7ce18a033a9de.js"],"component---src-pages-index-js":["/component---src-pages-index-js-edccd4743daad948ea55.js"],"component---src-pages-projetos-js":["/component---src-pages-projetos-js-6a685b2352cd24007efa.js"]};/*]]>*/</script><script src="/webpack-runtime-c696d4eab4edeaf536f9.js" async=""></script><script src="/commons-2183538a8e5c08226e6c.js" async=""></script><script src="/styles-156184b221207714e54d.js" async=""></script><script src="/component---src-templates-post-en-js-8a5d50cc8a3c361d1e81.js" async=""></script><script src="/app-6636270e74f8217bce84.js" async=""></script></body></html>